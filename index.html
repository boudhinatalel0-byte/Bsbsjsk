<!DOCTYPE html>
<html lang="ar" dir="rtl" id="app-html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GlobalEarn Pro | Enterprise v7.0 (Global Edition)</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;700;900&family=Poppins:wght@300;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    
    <style>
        /* --- 1. Variables & Themes --- */
        :root {
            --primary: #007AFF;
            --accent: #FFD700;
            --bg-dark: #09090b;
            --bg-card: #121215;
            --bg-input: #1c1c21;
            --text-main: #ffffff;
            --text-dim: #a1a1aa;
            --success: #22c55e;
            --error: #ef4444;
            --border: rgba(255, 255, 255, 0.08);
            --grad: linear-gradient(135deg, #007AFF 0%, #00C6FF 100%);
        }

        /* --- 2. Base Reset --- */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Tajawal', 'Poppins', sans-serif; }
        body { background-color: var(--bg-dark); color: var(--text-main); overflow-x: hidden; padding-bottom: 100px; }

        /* --- 3. Custom Animations --- */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* --- 4. Auth & Registration --- */
        #auth-overlay {
            position: fixed; inset: 0; background: var(--bg-dark); z-index: 9999;
            display: flex; flex-direction: column; padding: 40px 25px; overflow-y: auto;
        }
        .auth-card { background: var(--bg-card); padding: 30px; border-radius: 25px; border: 1px solid var(--border); }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-size: 13px; color: var(--text-dim); }
        .form-group input { 
            width: 100%; padding: 16px; background: var(--bg-input); border: 1px solid var(--border); 
            border-radius: 15px; color: white; outline: none; transition: 0.3s;
        }
        .form-group input:focus { border-color: var(--primary); }
        .btn-auth { background: var(--grad); color: white; padding: 18px; border-radius: 15px; border: none; font-weight: 700; width: 100%; cursor: pointer; }

        /* --- 5. Header UI --- */
        header {
            padding: 20px; background: rgba(9, 9, 11, 0.95); backdrop-filter: blur(15px);
            display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--border);
        }
        .user-info { display: flex; align-items: center; gap: 12px; }
        .avatar { width: 45px; height: 45px; border-radius: 15px; background: var(--accent); color: #000; display: flex; justify-content: center; align-items: center; font-weight: 900; }

        /* --- 6. The 6-Slides Dynamic Slider --- */
        .swiper { width: 100%; height: 230px; margin: 15px 0; }
        .swiper-slide {
            background: #1a1a1c; border-radius: 25px; overflow: hidden; position: relative; margin: 0 12px;
            display: flex; align-items: center; justify-content: center;
        }
        .swiper-slide img { width: 100%; height: 100%; object-fit: cover; opacity: 0.5; }
        .slide-txt { position: absolute; bottom: 25px; right: 20px; left: 20px; text-align: right; z-index: 2; }
        .slide-txt h2 { font-size: 20px; color: var(--accent); margin-bottom: 5px; }
        .slide-txt p { font-size: 11px; color: #ddd; }
        .overlay { position: absolute; inset: 0; background: linear-gradient(transparent, rgba(0,0,0,0.9)); }

        /* --- 7. Wallet & Statistics --- */
        .container { padding: 0 15px; }
        .wallet-card {
            background: linear-gradient(145deg, #121215, #0a0a0c); border-radius: 30px;
            padding: 35px 20px; text-align: center; border: 1px solid var(--border); position: relative;
        }
        .balance-val { font-size: 50px; font-weight: 900; font-family: 'Poppins'; color: var(--success); margin: 10px 0; }
        .balance-val small { font-size: 18px; color: var(--text-dim); }
        
        .stat-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 25px; }
        .stat-item { background: var(--bg-input); padding: 12px; border-radius: 15px; border: 1px solid var(--border); }
        .stat-item span { font-size: 10px; color: var(--text-dim); display: block; margin-bottom: 5px; }
        .stat-item b { font-family: 'Poppins'; font-size: 14px; }

        /* --- 8. Tasks Section --- */
        .task-card {
            background: var(--bg-card); padding: 20px; border-radius: 20px; margin-bottom: 12px;
            display: flex; justify-content: space-between; align-items: center; border: 1px solid var(--border);
            animation: slideUp 0.5s ease;
        }
        .task-icon { width: 50px; height: 50px; background: rgba(0, 122, 255, 0.1); border-radius: 15px; display: flex; justify-content: center; align-items: center; color: var(--primary); font-size: 20px; }
        .reward { background: rgba(34, 197, 94, 0.15); color: var(--success); padding: 8px 15px; border-radius: 12px; font-weight: 800; font-family: 'Poppins'; }

        /* --- 9. Task Processing Modal --- */
        .modal { position: fixed; inset: 0; background: var(--bg-dark); z-index: 5000; display: none; flex-direction: column; }
        .timer-circle {
            width: 150px; height: 150px; border: 8px solid var(--bg-card); border-top-color: var(--primary);
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            font-size: 45px; font-weight: 900; font-family: 'Poppins'; margin: 40px auto;
        }

        /* --- 10. Nav Bar --- */
        nav {
            position: fixed; bottom: 0; width: 100%; height: 85px; background: rgba(18, 18, 20, 0.98);
            display: flex; justify-content: space-around; align-items: center; border-top: 1px solid var(--border);
        }
        .nav-link { text-align: center; color: var(--text-dim); font-size: 11px; cursor: pointer; }
        .nav-link.active { color: var(--primary); }
        .nav-link i { font-size: 24px; margin-bottom: 5px; display: block; }

        /* --- Toast Utility --- */
        #toast {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            background: var(--text-main); color: #000; padding: 12px 25px; border-radius: 50px;
            font-weight: 900; z-index: 10000; display: none; font-size: 13px;
        }
    </style>
</head>
<body>

    <div id="auth-overlay">
        <div class="auth-card">
            <h1 style="text-align:center; color:var(--primary); margin-bottom:10px;">GlobalEarn Pro</h1>
            <p style="text-align:center; font-size:12px; color:var(--text-dim); margin-bottom:30px;">ابدأ رحلتك العالمية في كسب الدولارات</p>
            
            <div class="form-group">
                <label>الاسم الكامل</label>
                <input type="text" id="reg-name" placeholder="مثلاً: محمد علي">
            </div>
            <div class="form-group">
                <label>البريد الإلكتروني</label>
                <input type="email" id="reg-email" placeholder="name@global.com">
            </div>
            <div class="form-group">
                <label>كلمة السر</label>
                <input type="password" id="reg-pass" placeholder="••••••••">
            </div>
            <button class="btn-auth" onclick="App.auth.register()">إنشاء حساب مجاني</button>
        </div>
        <p style="text-align:center; margin-top:20px; font-size:10px; color:var(--text-dim);">تطبيقك العالمي - مدعوم بتقنيات الذكاء الاصطناعي</p>
    </div>

    <header>
        <div class="user-info">
            <div class="avatar" id="u-avatar">?</div>
            <div>
                <h4 id="u-name">مستخدم</h4>
                <p id="u-geo" style="font-size:9px; color:var(--success);">جاري تحديد الموقع...</p>
            </div>
        </div>
        <div onclick="App.ui.toggleSettings()" style="font-size:22px; cursor:pointer;"><i class="fa-solid fa-gear"></i></div>
    </header>

    <div class="swiper mySwiper">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="overlay"></div>
                <img src="https://images.unsplash.com/photo-1518458028785-8fbcd101ebb9?q=80&w=1470&auto=format&fit=crop">
                <div class="slide-txt">
                    <h2>نظام الدفع الفوري</h2>
                    <p>اسحب أرباحك عبر PayPal أو المحافظ الإلكترونية.</p>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="overlay"></div>
                <img src="https://images.unsplash.com/photo-1554224155-6726b3ff858f?q=80&w=1411&auto=format&fit=crop">
                <div class="slide-txt">
                    <h2>اربح حسب دولتك</h2>
                    <p>نظام CPM ذكي يحلل موقعك الجغرافي لرفع أرباحك.</p>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="overlay"></div>
                <img src="https://images.unsplash.com/photo-1633151209826-a9787197665e?q=80&w=1470&auto=format&fit=crop">
                <div class="slide-txt">
                    <h2>مكافآت يومية</h2>
                    <p>احصل على هدية دخول مجانية كل 24 ساعة.</p>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="overlay"></div>
                <img src="https://images.unsplash.com/photo-1553729459-efe14ef6055d?q=80&w=1470&auto=format&fit=crop">
                <div class="slide-txt">
                    <h2>نظام المستويات</h2>
                    <p>كلما زاد نشاطك، زادت نسبة ربحك من المهمة الواحدة.</p>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="overlay"></div>
                <img src="https://images.unsplash.com/photo-1454165833767-1316b34427d9?q=80&w=1470&auto=format&fit=crop">
                <div class="slide-txt">
                    <h2>تقارير مفصلة</h2>
                    <p>تابع أرباحك لحظة بلحظة عبر لوحة التحكم.</p>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="overlay"></div>
                <img src="https://images.unsplash.com/photo-1614028674026-a65e31bfd27c?q=80&w=1470&auto=format&fit=crop">
                <div class="slide-txt">
                    <h2>الأمان العالمي</h2>
                    <p>بياناتك وأرباحك مشفرة ومحمية بأعلى المعايير.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="wallet-card">
            <p style="font-size:12px; color:var(--text-dim); text-transform:uppercase; letter-spacing:1px;">إجمالي الأرباح</p>
            <div class="balance-val">$<span id="bal-main">0.00</span></div>
            
            <div class="stat-grid">
                <div class="stat-item"><span>المهام</span><b id="st-tasks">0</b></div>
                <div class="stat-item"><span>المستوى</span><b id="st-level">1</b></div>
                <div class="stat-item"><span>الموقع</span><b id="st-geo">Global</b></div>
            </div>
        </div>

        <h3 style="margin:25px 0 15px; font-size:17px;">المهام النشطة الآن</h3>
        <div id="tasks-list">
            </div>
    </div>

    <div id="task-modal" class="modal">
        <div style="padding:20px; border-bottom:1px solid var(--border); display:flex; align-items:center; gap:10px;">
            <i class="fa-solid fa-satellite-dish" style="color:var(--primary)"></i>
            <h4>تحليل البيانات والمكافأة...</h4>
        </div>
        <div style="flex:1; display:flex; flex-direction:column; justify-content:center; align-items:center; padding:30px;">
            <div class="timer-circle" id="m-timer">00</div>
            <p id="m-status" style="text-align:center; color:var(--text-dim);">يرجى البقاء في الصفحة لضمان احتساب الأرباح بنجاح.</p>
            <div style="width:100%; height:200px; background:var(--bg-input); border-radius:20px; margin-top:30px; display:flex; justify-content:center; align-items:center; border:1px dashed #333; color:#444;">
                AD SPACE (CPM AREA)
            </div>
        </div>
    </div>

    <nav>
        <div class="nav-link active"><i class="fa-solid fa-house-user"></i>الرئيسية</div>
        <div class="nav-link" onclick="App.ui.showToast('قسم السحب يفتح قريباً')"><i class="fa-solid fa-money-bill-transfer"></i>سحب</div>
        <div class="nav-link" onclick="App.ui.showToast('قريباً: دعوة أصدقاء')"><i class="fa-solid fa-users-gear"></i>إحالة</div>
        <div class="nav-link" onclick="App.ui.toggleSettings()"><i class="fa-solid fa-id-card"></i>حسابي</div>
    </nav>

    <div id="toast"></div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        /**
         * GLOBAL EARN PRO V7.0
         * Comprehensive Logic Engine
         */

        const App = {
            state: {
                user: {
                    name: "",
                    balance: 0.00,
                    tasks: 0,
                    level: 1,
                    lang: 'ar',
                    country: 'Detecting...',
                    multiplier: 1.0
                },
                isRunning: false
            },

            auth: {
                register: function() {
                    const n = document.getElementById('reg-name').value;
                    const e = document.getElementById('reg-email').value;
                    if(n.length < 3 || !e.includes('@')) return App.ui.showToast("الرجاء إدخال بيانات صحيحة");
                    
                    App.state.user.name = n;
                    App.storage.save();
                    document.getElementById('auth-overlay').style.display = 'none';
                    App.init();
                }
            },

            logic: {
                generateTasks: function() {
                    const tasks = [
                        { id: 1, name: "فيديو ترويجي سريع", sec: 10, reward: 0.01 },
                        { id: 2, name: "استبيان رأي دولي", sec: 30, reward: 0.05 },
                        { id: 3, name: "مشاهدة إعلان مطول", sec: 60, reward: 0.12 },
                        { id: 4, name: "تثبيت تطبيق تجريبي", sec: 45, reward: 0.08 }
                    ];
                    const container = document.getElementById('tasks-list');
                    container.innerHTML = "";
                    tasks.forEach(t => {
                        const card = document.createElement('div');
                        card.className = "task-card";
                        card.onclick = () => App.logic.runTask(t);
                        card.innerHTML = `
                            <div style="display:flex; align-items:center; gap:15px;">
                                <div class="task-icon"><i class="fa-solid fa-play"></i></div>
                                <div><h4>${t.name}</h4><p style="font-size:10px; color:var(--text-dim);">المدة: ${t.sec} ثانية</p></div>
                            </div>
                            <div class="reward">+$${(t.reward * App.state.user.multiplier).toFixed(2)}</div>
                        `;
                        container.appendChild(card);
                    });
                },

                runTask: function(task) {
                    if(App.state.isRunning) return;
                    App.state.isRunning = true;
                    const modal = document.getElementById('task-modal');
                    const timer = document.getElementById('m-timer');
                    modal.style.display = 'flex';
                    
                    let count = task.sec;
                    timer.innerText = count;
                    
                    const interval = setInterval(() => {
                        count--;
                        timer.innerText = count;
                        if(count <= 0) {
                            clearInterval(interval);
                            App.logic.finalizeTask(task.reward);
                        }
                    }, 1000);
                },

                finalizeTask: function(reward) {
                    const final = reward * App.state.user.multiplier;
                    App.state.user.balance += final;
                    App.state.user.tasks++;
                    
                    // Level Logic
                    if(App.state.user.tasks % 5 === 0) {
                        App.state.user.level++;
                        App.ui.showToast("تهانينا! ارتفع مستواك");
                    }
                    
                    App.state.isRunning = false;
                    document.getElementById('task-modal').style.display = 'none';
                    App.storage.save();
                    App.ui.updateUI();
                    App.ui.showToast(`تمت إضافة $${final.toFixed(2)} لمسابقتك`);
                }
            },

            ui: {
                updateUI: function() {
                    document.getElementById('u-name').innerText = App.state.user.name;
                    document.getElementById('u-avatar').innerText = App.state.user.name.charAt(0);
                    document.getElementById('bal-main').innerText = App.state.user.balance.toFixed(2);
                    document.getElementById('st-tasks').innerText = App.state.user.tasks;
                    document.getElementById('st-level').innerText = App.state.user.level;
                    document.getElementById('st-geo').innerText = App.state.user.country;
                },

                showToast: function(m) {
                    const t = document.getElementById('toast');
                    t.innerText = m; t.style.display = 'block';
                    setTimeout(() => t.style.display = 'none', 3000);
                },

                toggleSettings: function() {
                    App.ui.showToast("الإعدادات قيد الصيانة");
                }
            },

            storage: {
                save: function() { localStorage.setItem('GEP_DATA', JSON.stringify(App.state.user)); },
                load: function() {
                    const d = localStorage.getItem('GEP_DATA');
                    if(d) {
                        App.state.user = JSON.parse(d);
                        document.getElementById('auth-overlay').style.display = 'none';
                        App.init();
                    }
                }
            },

            init: function() {
                // Initialize Swiper
                new Swiper(".mySwiper", {
                    loop: true,
                    autoplay: { delay: 3500 },
                    pagination: { el: ".swiper-pagination", clickable: true }
                });
                
                // Fetch Location (Mock)
                setTimeout(() => {
                    App.state.user.country = "Tunisia";
                    App.state.user.multiplier = 1.25;
                    document.getElementById('u-geo').innerText = "تم تحديد الموقع: " + App.state.user.country;
                    App.ui.updateUI();
                    App.logic.generateTasks();
                }, 2000);

                App.ui.updateUI();
                App.logic.generateTasks();
            }
        };

        window.onload = App.storage.load;
    </script>
</body>
</html>
